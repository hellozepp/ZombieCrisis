# ZombieCrisis æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

ZombieCrisis æ˜¯ä¸€ä¸ªåŸºäº Java AWT æ¡†æ¶å¼€å‘çš„ 2D å°„å‡»ç”Ÿå­˜ç±»æ¸¸æˆï¼Œé‡‡ç”¨ç»å…¸çš„ **MVC æ¶æ„æ¨¡å¼** å’Œ **é¢å‘å¯¹è±¡è®¾è®¡**ã€‚

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç•Œé¢å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Start   â”‚â”€â”€â”€â–¶â”‚ GameClient   â”‚â”€â”€â”€â–¶â”‚   World     â”‚      â”‚
â”‚  â”‚ (å¼€å§‹ç•Œé¢)â”‚    â”‚  (æ¸¸æˆçª—å£)   â”‚    â”‚ (æ¸¸æˆä¸–ç•Œ)   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ¸¸æˆé€»è¾‘å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              GameObject (æ¸¸æˆå¯¹è±¡åŸºç±»)             â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚           â”‚                    â”‚                â”‚           â”‚
â”‚           â–¼                    â–¼                â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Role     â”‚    â”‚   Weapon     â”‚  â”‚  ç¯å¢ƒå¯¹è±¡     â”‚   â”‚
â”‚  â”‚  (è§’è‰²åŸºç±»)  â”‚    â”‚  (æ­¦å™¨åŸºç±»)   â”‚  â”‚ (Wall/Boxç­‰) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    â”‚         â”‚         â”‚         â”‚                         â”‚
â”‚    â–¼         â–¼         â–¼         â–¼                         â”‚
â”‚  Hero     Enemy     Sword     Ball                         â”‚
â”‚  (ç©å®¶)   (æ•Œäºº)    (è¿‘æˆ˜)    (è¿œç¨‹)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ”¯æŒç³»ç»Ÿå±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  WorldGrids  â”‚  â”‚  Pathfinder  â”‚  â”‚  Direction   â”‚    â”‚
â”‚  â”‚  (ç½‘æ ¼ç³»ç»Ÿ)   â”‚  â”‚  (å¯»è·¯ç³»ç»Ÿ)   â”‚  â”‚  (æ–¹å‘æšä¸¾)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ è®¾è®¡æ¨¡å¼

### 1. **æ¨¡æ¿æ–¹æ³•æ¨¡å¼** (Template Method)

**åº”ç”¨åœºæ™¯**: `GameObject` æŠ½è±¡åŸºç±»

```java
public abstract class GameObject {
    // æ¨¡æ¿æ–¹æ³•å®šä¹‰ç®—æ³•éª¨æ¶
    public abstract void draw(Graphics g);
    public abstract void collisionResponse(GameObject object);
    public abstract void onAttack(Weapon weapon);
    
    // é€šç”¨å®ç°
    public boolean collisionDetection(GameObject object) {
        // ç¢°æ’æ£€æµ‹çš„é€šç”¨ç®—æ³•
    }
}
```

**ä¼˜ç‚¹**:
- ç»Ÿä¸€äº†æ‰€æœ‰æ¸¸æˆå¯¹è±¡çš„æ¥å£
- å­ç±»åªéœ€å®ç°ç‰¹å®šè¡Œä¸º
- ä¾¿äºæ‰©å±•æ–°å¯¹è±¡ç±»å‹

---

### 2. **ç­–ç•¥æ¨¡å¼** (Strategy)

**åº”ç”¨åœºæ™¯**: æ­¦å™¨ç³»ç»Ÿ

```java
public class Role {
    private List<Weapon> weapons;      // æ­¦å™¨ç­–ç•¥åˆ—è¡¨
    private Weapon currentWeapon;      // å½“å‰ç­–ç•¥
    
    public void NextWeapon() {
        // åˆ‡æ¢ç­–ç•¥
    }
}
```

**ä¼˜ç‚¹**:
- æ­¦å™¨å¯ä»¥åŠ¨æ€åˆ‡æ¢
- æ–°å¢æ­¦å™¨æ— éœ€ä¿®æ”¹è§’è‰²ç±»
- æ¯ä¸ªæ­¦å™¨ç‹¬ç«‹å°è£…æ”»å‡»é€»è¾‘

---

### 3. **è§‚å¯Ÿè€…æ¨¡å¼** (Observer)

**åº”ç”¨åœºæ™¯**: é”®ç›˜äº‹ä»¶ç›‘å¬

```java
public class GameClient extends Frame {
    private class KeyMonitor extends KeyAdapter {
        Hero hero;
        public void keyPressed(KeyEvent e) {
            hero.KeyPressed(e);  // é€šçŸ¥è§‚å¯Ÿè€…
        }
    }
}
```

**ä¼˜ç‚¹**:
- è§£è€¦è¾“å…¥å’Œæ¸¸æˆé€»è¾‘
- æ”¯æŒå¤šä¸ªç©å®¶ç‹¬ç«‹ç›‘å¬
- æ˜“äºæ‰©å±•æ–°çš„è¾“å…¥æ–¹å¼

---

### 4. **å·¥å‚æ¨¡å¼** (Factory)

**åº”ç”¨åœºæ™¯**: æ•Œäººç”Ÿæˆ

```java
public class World {
    public void produceEnemy() {
        int type = Math.abs(rand.nextInt()) % 100;
        int pos = Math.abs(rand.nextInt()) % 4;
        
        // æ ¹æ®ç±»å‹å’Œä½ç½®åˆ›å»ºä¸åŒæ•Œäºº
        objects.add(type < 10 ? 
            new Ghost(x, y, this) : 
            new Monster(x, y, this));
    }
}
```

**ä¼˜ç‚¹**:
- é›†ä¸­ç®¡ç†å¯¹è±¡åˆ›å»º
- æ˜“äºè°ƒæ•´ç”Ÿæˆè§„åˆ™
- æ”¯æŒåŠ¨æ€é…ç½®æ•Œäººç±»å‹

---

### 5. **å•ä¾‹æ¨¡å¼** (Singleton)

**åº”ç”¨åœºæ™¯**: å›¾ç‰‡èµ„æºç®¡ç†

```java
public abstract class GameObject {
    protected static Map<String, Image> imgMap = new HashMap<>();
    
    static {
        // é™æ€åˆå§‹åŒ–ï¼Œå…¨å±€å…±äº«
        imgMap.put("Hero", imgs[0]);
        imgMap.put("Monster", imgs[1]);
        // ...
    }
}
```

**ä¼˜ç‚¹**:
- é¿å…é‡å¤åŠ è½½å›¾ç‰‡
- èŠ‚çœå†…å­˜
- æé«˜æ€§èƒ½

---

### 6. **åŸå‹æ¨¡å¼** (Prototype)

**åº”ç”¨åœºæ™¯**: å¼¹ä¸¸å…‹éš†

```java
public class Ball extends Weapon implements Cloneable {
    public void initFireball(Direction dir) {
        world.addObject((Ball) this.clone());  // å…‹éš†å¼¹ä¸¸
    }
}
```

**ä¼˜ç‚¹**:
- å¿«é€Ÿåˆ›å»ºå¤§é‡ç›¸ä¼¼å¯¹è±¡
- é¿å…é‡å¤åˆå§‹åŒ–
- æ”¯æŒå¤§æ‹›å¤šæ–¹å‘å‘å°„

---

## ğŸ”„ æ ¸å¿ƒæµç¨‹

### æ¸¸æˆä¸»å¾ªç¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         GameClient.PaintThread          â”‚
â”‚                                         â”‚
â”‚  while(true) {                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚  1. repaint()               â”‚     â”‚
â”‚    â”‚     â†“                        â”‚     â”‚
â”‚    â”‚  2. update() (åŒç¼“å†²)        â”‚     â”‚
â”‚    â”‚     â†“                        â”‚     â”‚
â”‚    â”‚  3. paint()                  â”‚     â”‚
â”‚    â”‚     â†“                        â”‚     â”‚
â”‚    â”‚  4. world.drawWorld()        â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚    Thread.sleep(30ms)  // ~33 FPS      â”‚
â”‚  }                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### æ¸¸æˆä¸–ç•Œæ›´æ–°æµç¨‹

```
World.drawWorld()
    â”‚
    â”œâ”€â–¶ produceEnemy()        // ç”Ÿæˆæ•Œäºº
    â”‚
    â”œâ”€â–¶ produceBox()          // ç”Ÿæˆå®ç®±
    â”‚
    â”œâ”€â–¶ ç»˜åˆ¶è¡€è¿¹
    â”‚
    â”œâ”€â–¶ objectSort()          // æ·±åº¦æ’åº
    â”‚
    â””â”€â–¶ éå†æ‰€æœ‰å¯¹è±¡
         â””â”€â–¶ object.draw()
              â”‚
              â”œâ”€â–¶ move()                    // ç§»åŠ¨
              â”œâ”€â–¶ collisionDetection()      // ç¢°æ’æ£€æµ‹
              â”œâ”€â–¶ collisionResponse()       // ç¢°æ’å“åº”
              â””â”€â–¶ drawImage()               // ç»˜åˆ¶
```

---

### è§’è‰²ç§»åŠ¨æµç¨‹

```
Role.move()
    â”‚
    â”œâ”€â–¶ 1. è®¡ç®—ç§»åŠ¨æ–¹å‘è§’åº¦
    â”‚      Direction.toDegree(dir)
    â”‚
    â”œâ”€â–¶ 2. è®¡ç®—X/Yå¢é‡
    â”‚      xIncrement = speed * cos(angle)
    â”‚      yIncrement = speed * sin(angle)
    â”‚
    â”œâ”€â–¶ 3. ç¢°æ’æ£€æµ‹
    â”‚      world.collisionDetection(this)
    â”‚      â”‚
    â”‚      â””â”€â–¶ éå†æ‰€æœ‰å¯¹è±¡
    â”‚           â””â”€â–¶ åœ†å½¢ç¢°æ’æ£€æµ‹
    â”‚                â””â”€â–¶ è·ç¦» â‰¤ åŠå¾„å’Œï¼Ÿ
    â”‚                     â”œâ”€â–¶ æ˜¯: æ¨å¼€å¯¹è±¡
    â”‚                     â””â”€â–¶ å¦: ç»§ç»­
    â”‚
    â””â”€â–¶ 4. æ›´æ–°åæ ‡
         x += xIncrement
         y += yIncrement
```

---

### æ•ŒäººAIæµç¨‹

```
Enemy.locateDirection()
    â”‚
    â”œâ”€â–¶ 1. æ¯30å¸§åˆ·æ–°ä¸€æ¬¡
    â”‚      mainTainRefreshPath(30) == 0?
    â”‚      â”‚
    â”‚      â””â”€â–¶ æ˜¯: é‡æ–°å¯»è·¯
    â”‚           â”‚
    â”‚           â”œâ”€â–¶ getTarget()           // å¯»æ‰¾æœ€è¿‘ç©å®¶
    â”‚           â”‚    â””â”€â–¶ éå†æ‰€æœ‰Hero
    â”‚           â”‚         â””â”€â–¶ è®¡ç®—è·ç¦»
    â”‚           â”‚              â””â”€â–¶ é€‰æ‹©æœ€è¿‘çš„
    â”‚           â”‚
    â”‚           â””â”€â–¶ pathfinder.shortestPath()  // A*å¯»è·¯
    â”‚                â””â”€â–¶ è§"å¯»è·¯ç®—æ³•æµç¨‹"
    â”‚
    â”œâ”€â–¶ 2. è·Ÿéšè·¯å¾„
    â”‚      path.get(0) == currentGrid?
    â”‚      â”œâ”€â–¶ æ˜¯: ç§»é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
    â”‚      â””â”€â–¶ å¦: ç»§ç»­ç§»åŠ¨
    â”‚
    â””â”€â–¶ 3. è®¾ç½®ç§»åŠ¨æ–¹å‘
         dir = getNextDir(path.get(0))
```

---

### å¯»è·¯ç®—æ³•æµç¨‹ (A*)

```
Pathfinder.shortestPath(goalPos)
    â”‚
    â”œâ”€â–¶ 1. åˆå§‹åŒ–
    â”‚      openNodes = [startNode]
    â”‚      closedNodes = []
    â”‚
    â”œâ”€â–¶ 2. ä¸»å¾ªç¯
    â”‚      while(openNodesä¸ä¸ºç©º) {
    â”‚        â”‚
    â”‚        â”œâ”€â–¶ 2.1 å–å‡ºFå€¼æœ€å°çš„èŠ‚ç‚¹
    â”‚        â”‚      currentNode = openNodes.pop()
    â”‚        â”‚      closedNodes.add(currentNode)
    â”‚        â”‚
    â”‚        â”œâ”€â–¶ 2.2 æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç›®æ ‡
    â”‚        â”‚      è·ç¦» < åŠå¾„å’Œï¼Ÿ
    â”‚        â”‚      â””â”€â–¶ æ˜¯: è¿”å›è·¯å¾„
    â”‚        â”‚
    â”‚        â”œâ”€â–¶ 2.3 æ‰©å±•ç›¸é‚»èŠ‚ç‚¹
    â”‚        â”‚      expanded = nextMoves(current)
    â”‚        â”‚      â”‚
    â”‚        â”‚      â””â”€â–¶ 8ä¸ªæ–¹å‘
    â”‚        â”‚           â””â”€â–¶ æ£€æŸ¥æ˜¯å¦å¯é€šè¡Œ
    â”‚        â”‚                â””â”€â–¶ æ˜¯: åŠ å…¥expanded
    â”‚        â”‚
    â”‚        â””â”€â–¶ 2.4 æ›´æ–°èŠ‚ç‚¹ä»£ä»·
    â”‚             for(node in expanded) {
    â”‚               g = currentNode.g + cost
    â”‚               h = getHeuristic(node, goal)
    â”‚               f = g + h
    â”‚               
    â”‚               if(node in openNodes && g < node.g) {
    â”‚                 æ›´æ–°node
    â”‚               } else if(node not in closedNodes) {
    â”‚                 openNodes.add(node)
    â”‚               }
    â”‚             }
    â”‚             
    â”‚             openNodes.sort()  // æŒ‰Få€¼æ’åº
    â”‚      }
    â”‚
    â””â”€â–¶ 3. å›æº¯è·¯å¾„
         ä»goalNodeå¼€å§‹
         â””â”€â–¶ æ²¿ç€parentNodeå›æº¯
              â””â”€â–¶ åè½¬è·¯å¾„
                   â””â”€â–¶ è¿”å›
```

**ä»£ä»·è®¡ç®—**:
- ç›´çº¿ç§»åŠ¨: 10
- æ–œçº¿ç§»åŠ¨: 14 (çº¦âˆš2 * 10)
- å¯å‘å¼: æ›¼å“ˆé¡¿è·ç¦» * 10

---

### æ­¦å™¨æ”»å‡»æµç¨‹

```
Weapon.Attack()
    â”‚
    â”œâ”€â–¶ 1. éå†æ‰€æœ‰å¯¹è±¡
    â”‚      for(object in world.objects) {
    â”‚        â”‚
    â”‚        â”œâ”€â–¶ è·³è¿‡è‡ªå·±å’Œé˜Ÿå‹
    â”‚        â”‚
    â”‚        â”œâ”€â–¶ 2. è·ç¦»åˆ¤å®š
    â”‚        â”‚      distance < attackRange?
    â”‚        â”‚      â”‚
    â”‚        â”‚      â””â”€â–¶ æ˜¯: ç»§ç»­
    â”‚        â”‚
    â”‚        â”œâ”€â–¶ 3. è§’åº¦åˆ¤å®š
    â”‚        â”‚      è®¡ç®—ç›®æ ‡ç›¸å¯¹è§’åº¦
    â”‚        â”‚      |myAngle - targetAngle| < attackAngle?
    â”‚        â”‚      â”‚
    â”‚        â”‚      â””â”€â–¶ æ˜¯: å‘½ä¸­
    â”‚        â”‚
    â”‚        â””â”€â–¶ 4. è§¦å‘ä¼¤å®³
    â”‚             object.onAttack(this)
    â”‚             â”‚
    â”‚             â””â”€â–¶ HP -= damage
    â”‚                  â”‚
    â”‚                  â”œâ”€â–¶ HP > 0: å—å‡»åŠ¨ç”»
    â”‚                  â””â”€â–¶ HP â‰¤ 0: æ­»äº¡
    â”‚      }
    â”‚
    â””â”€â–¶ 5. è®¾ç½®å†·å´
         coldDown = coldDownTime
```

---

### ç¢°æ’æ£€æµ‹æµç¨‹

```
GameObject.collisionDetection(object)
    â”‚
    â”œâ”€â–¶ 1. å‰ç½®æ£€æŸ¥
    â”‚      â”œâ”€â–¶ å¯¹æ–¹å¯ç¢°æ’ï¼Ÿ
    â”‚      â”œâ”€â–¶ è‡ªå·±åœ¨ç§»åŠ¨æˆ–å—å‡»ï¼Ÿ
    â”‚      â””â”€â–¶ å¦: è¿”å›false
    â”‚
    â”œâ”€â–¶ 2. è®¡ç®—è·ç¦»
    â”‚      deltaX = this.x - object.x
    â”‚      deltaY = this.y - object.y
    â”‚      distance = âˆš(deltaXÂ² + deltaYÂ²)
    â”‚
    â”œâ”€â–¶ 3. åˆ¤æ–­ç¢°æ’
    â”‚      R = this.radius + object.radius
    â”‚      distance â‰¤ R?
    â”‚      â”‚
    â”‚      â””â”€â–¶ æ˜¯: å‘ç”Ÿç¢°æ’
    â”‚           â”‚
    â”‚           â”œâ”€â–¶ 4. è®¡ç®—åˆ†ç¦»å‘é‡
    â”‚           â”‚      cosA = deltaX / distance
    â”‚           â”‚      sinA = deltaY / distance
    â”‚           â”‚      offsetX = (R - distance + 2) * cosA
    â”‚           â”‚      offsetY = (R - distance + 2) * sinA
    â”‚           â”‚
    â”‚           â””â”€â–¶ 5. æ¨å¼€å¯¹è±¡
    â”‚                this.x += offsetX
    â”‚                this.y += offsetY
    â”‚                return true
    â”‚
    â””â”€â–¶ å¦: è¿”å›false
```

---

## ğŸ¯ æ•°æ®æµå‘

### è¾“å…¥ â†’ å¤„ç† â†’ è¾“å‡º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é”®ç›˜è¾“å…¥     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  KeyMonitor          â”‚
â”‚  (é”®ç›˜ç›‘å¬å™¨)         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hero.KeyPressed()   â”‚
â”‚  (æŒ‰é”®å¤„ç†)           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â–¶ ç§»åŠ¨é”®: è®¾ç½®æ–¹å‘
       â”œâ”€â–¶ æ”»å‡»é”®: weapon.setState()
       â”œâ”€â–¶ åˆ‡æ¢é”®: NextWeapon()
       â””â”€â–¶ å¤§æ‹›é”®: weapon.setUltimateState()
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hero.draw()         â”‚
â”‚  (ç»˜åˆ¶å’Œæ›´æ–°)         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â–¶ move()              // ç§»åŠ¨
       â”œâ”€â–¶ weapon.draw()       // æ­¦å™¨ç»˜åˆ¶
       â””â”€â–¶ drawWalkImage()     // è§’è‰²ç»˜åˆ¶
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Graphics            â”‚
â”‚  (å±å¹•è¾“å‡º)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© æ¨¡å—èŒè´£

### 1. **ç•Œé¢æ¨¡å—**
- **Start**: æ¸¸æˆå¯åŠ¨ç•Œé¢ï¼Œæ¨¡å¼é€‰æ‹©
- **GameClient**: æ¸¸æˆä¸»çª—å£ï¼Œæ¸²æŸ“å¾ªç¯ï¼Œè¾“å…¥ç›‘å¬

### 2. **ä¸–ç•Œç®¡ç†æ¨¡å—**
- **World**: æ¸¸æˆä¸–ç•Œç®¡ç†å™¨
  - å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
  - æ•Œäººæ³¢æ¬¡ç³»ç»Ÿ
  - ç¢°æ’æ£€æµ‹åè°ƒ
  - æ¸¸æˆçŠ¶æ€ç®¡ç†

### 3. **æ¸¸æˆå¯¹è±¡æ¨¡å—**
- **GameObject**: å¯¹è±¡åŸºç±»
- **Role**: è§’è‰²åŸºç±»ï¼ˆç©å®¶å’Œæ•Œäººï¼‰
- **Hero**: ç©å®¶å®ç°
- **Enemy**: æ•ŒäººåŸºç±»
- **Monster/Ghost**: å…·ä½“æ•Œäººç±»å‹

### 4. **æ­¦å™¨ç³»ç»Ÿæ¨¡å—**
- **Weapon**: æ­¦å™¨åŸºç±»
- **Sword/Hand**: è¿‘æˆ˜æ­¦å™¨
- **Ball**: å¼¹ä¸¸åŸºç±»
- **Fireball/Ghostball**: å…·ä½“å¼¹ä¸¸ç±»å‹

### 5. **ç¯å¢ƒå¯¹è±¡æ¨¡å—**
- **Wall**: å¢™å£éšœç¢
- **Border**: åœ°å›¾è¾¹ç•Œ
- **Box**: è¡¥ç»™ç®±
- **Blood**: è§†è§‰æ•ˆæœ

### 6. **AIæ¨¡å—**
- **Pathfinder**: A*å¯»è·¯ç®—æ³•
- **PathNode**: å¯»è·¯èŠ‚ç‚¹
- **WorldGrids**: ç½‘æ ¼ç³»ç»Ÿ

### 7. **å·¥å…·æ¨¡å—**
- **Direction**: æ–¹å‘æšä¸¾

---

## ğŸ” çº¿ç¨‹å®‰å…¨è®¾è®¡

### é—®é¢˜
- ç»˜åˆ¶çº¿ç¨‹æŒç»­è¯»å–å¯¹è±¡åˆ—è¡¨
- æ¸¸æˆé€»è¾‘å¯èƒ½æ·»åŠ /åˆ é™¤å¯¹è±¡
- å¹¶å‘è®¿é—®å¯èƒ½å¯¼è‡´ `ConcurrentModificationException`

### è§£å†³æ–¹æ¡ˆ

```java
public class World {
    // ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆ
    private CopyOnWriteArrayList<GameObject> objects;
    private CopyOnWriteArrayList<Blood> bloods;
}
```

**CopyOnWriteArrayList ç‰¹ç‚¹**:
- å†™æ—¶å¤åˆ¶ï¼šä¿®æ”¹æ—¶åˆ›å»ºæ–°æ•°ç»„
- è¯»æ“ä½œæ— é”ï¼šéå†æ—¶ä¸å—å½±å“
- é€‚åˆè¯»å¤šå†™å°‘åœºæ™¯

---

## ğŸ¨ æ¸²æŸ“ä¼˜åŒ–

### 1. **åŒç¼“å†²æŠ€æœ¯**

```java
public void update(Graphics g) {
    // 1. åˆ›å»ºç¦»å±å›¾åƒ
    if(offScreenImage == null) {
        offScreenImage = createImage(WIDTH, HEIGHT);
    }
    
    // 2. åœ¨ç¦»å±å›¾åƒä¸Šç»˜åˆ¶
    Graphics gOffScreen = offScreenImage.getGraphics();
    paint(gOffScreen);
    
    // 3. ä¸€æ¬¡æ€§æ˜¾ç¤ºåˆ°å±å¹•
    g.drawImage(offScreenImage, 0, 0, null);
}
```

**æ•ˆæœ**: æ¶ˆé™¤ç”»é¢é—ªçƒ

---

### 2. **æ·±åº¦æ’åº**

```java
public void objectSort() {
    Collections.sort(objects, (obj1, obj2) -> {
        int i = obj1.getY() - obj2.getY();
        return i == 0 ? obj1.getX() - obj2.getX() : i;
    });
}
```

**æ•ˆæœ**: Yåæ ‡å°çš„å…ˆç»˜åˆ¶ï¼Œå®ç°æ­£ç¡®çš„é®æŒ¡å…³ç³»

---

### 3. **ç²¾çµå›¾æŠ€æœ¯**

```java
public void drawOneImage(Graphics g, String name, int picOffset,
                         int x, int y, int picX, int picY) {
    g.drawImage(imgMap.get(name),
        x - picOffset, y - picOffset,      // ç›®æ ‡ä½ç½®
        x + picOffset, y + picOffset,
        picX * picOffset * 2,               // æºå›¾ç‰‡ä½ç½®
        picY * picOffset * 2,
        picX * picOffset * 2 + picOffset * 2,
        picY * picOffset * 2 + picOffset * 2,
        null);
}
```

**ä¼˜ç‚¹**:
- å‡å°‘å›¾ç‰‡æ–‡ä»¶æ•°é‡
- æé«˜åŠ è½½é€Ÿåº¦
- ä¾¿äºç®¡ç†åŠ¨ç”»å¸§

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. **å¯¹è±¡æ± **
- **è¡€è¿¹ç³»ç»Ÿ**: å¾ªç¯ä½¿ç”¨5000ä¸ªè¡€è¿¹å¯¹è±¡
- **é¿å…**: é¢‘ç¹åˆ›å»º/é”€æ¯å¯¹è±¡

### 2. **å»¶è¿Ÿç”Ÿæˆ**
- **æ•Œäººç”Ÿæˆ**: æ¯æ¬¡ç”Ÿæˆåå»¶è¿Ÿ50å¸§
- **å®ç®±é‡ç”Ÿ**: æ‹¾å–åå»¶è¿Ÿ800å¸§
- **é¿å…**: ç¬é—´å¤§é‡å¯¹è±¡åˆ›å»º

### 3. **è·¯å¾„ç¼“å­˜**
- **åˆ·æ–°é¢‘ç‡**: æ¯30å¸§é‡æ–°è®¡ç®—è·¯å¾„
- **æ·±åº¦é™åˆ¶**: æœ€å¤§æœç´¢æ·±åº¦25
- **é¿å…**: æ¯å¸§éƒ½æ‰§è¡ŒA*ç®—æ³•

### 4. **ç¢°æ’ä¼˜åŒ–**
- **ç½‘æ ¼ç³»ç»Ÿ**: å°†ä¸–ç•Œåˆ’åˆ†ä¸º10x10ç½‘æ ¼
- **ç©ºé—´åˆ†åŒº**: åªæ£€æµ‹ç›¸é‚»ç½‘æ ¼çš„å¯¹è±¡
- **é¿å…**: å…¨å±€O(nÂ²)ç¢°æ’æ£€æµ‹

---

## ğŸ”§ å¯æ‰©å±•æ€§è®¾è®¡

### 1. **æ–°å¢æ•Œäººç±»å‹**

```java
// 1. åˆ›å»ºæ–°ç±»ç»§æ‰¿Enemy
public class NewEnemy extends Enemy {
    public NewEnemy(int x, int y, World world) {
        super("NewEnemy", HP, radius, speed, x, y, world);
        // è®¾ç½®æ­¦å™¨
    }
}

// 2. åœ¨World.produceEnemy()ä¸­æ·»åŠ 
int type = rand.nextInt() % 100;
if(type < 10) new Ghost(...);
else if(type < 20) new NewEnemy(...);  // æ–°å¢
else new Monster(...);
```

---

### 2. **æ–°å¢æ­¦å™¨ç±»å‹**

```java
// 1. åˆ›å»ºæ–°æ­¦å™¨ç±»
public class NewWeapon extends Weapon {
    public NewWeapon(Role host, World world) {
        super("NewWeapon", radius, speed, damage, 
              coldDown, host, range, angle, true, world);
    }
    
    @Override
    public void Attack() {
        // è‡ªå®šä¹‰æ”»å‡»é€»è¾‘
    }
}

// 2. åœ¨Heroæ„é€ æ–¹æ³•ä¸­æ·»åŠ 
addWeapon(new Sword(this, world));
addWeapon(new Fireball(this, world));
addWeapon(new NewWeapon(this, world));  // æ–°å¢
```

---

### 3. **æ–°å¢æ¸¸æˆæ¨¡å¼**

```java
// åœ¨Startç±»ä¸­æ·»åŠ æ–°æŒ‰é’®
class NewModeListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        new GameClient(newModeConfig).lauchFrame();
    }
}
```

---

## ğŸ› å·²çŸ¥é—®é¢˜å’Œæ”¹è¿›å»ºè®®

### å·²çŸ¥é—®é¢˜
1. **æ•Œäººæ•°é‡é™åˆ¶**: æœ€å¤š100ä¸ªæ•Œäººï¼Œå¯èƒ½å¯¼è‡´å¡é¡¿
2. **è·¯å¾„åˆ·æ–°**: å›ºå®š30å¸§åˆ·æ–°ï¼Œå¯èƒ½å¯¼è‡´æ•Œäººè¡Œä¸ºä¸å¤Ÿæµç•…
3. **ç¢°æ’æ£€æµ‹**: ä»ç„¶æ˜¯O(nÂ²)å¤æ‚åº¦ï¼Œå¯¹è±¡å¤šæ—¶æ€§èƒ½ä¸‹é™

### æ”¹è¿›å»ºè®®

#### 1. **å¼•å…¥å››å‰æ ‘**
```
å½“å‰: O(nÂ²) ç¢°æ’æ£€æµ‹
æ”¹è¿›: O(n log n) å››å‰æ ‘ç©ºé—´åˆ†åŒº
```

#### 2. **å¯¹è±¡æ± æ¨¡å¼**
```
å½“å‰: é¢‘ç¹new/removeå¯¹è±¡
æ”¹è¿›: é¢„åˆ›å»ºå¯¹è±¡æ± ï¼Œå¤ç”¨å¯¹è±¡
```

#### 3. **çŠ¶æ€æœºæ¨¡å¼**
```
å½“å‰: æ•ŒäººAIé€»è¾‘åˆ†æ•£
æ”¹è¿›: ä½¿ç”¨çŠ¶æ€æœºç®¡ç†AIçŠ¶æ€
      (å·¡é€»ã€è¿½å‡»ã€æ”»å‡»ã€é€ƒè·‘ç­‰)
```

#### 4. **é…ç½®æ–‡ä»¶**
```
å½“å‰: ç¡¬ç¼–ç æ•°å€¼
æ”¹è¿›: ä½¿ç”¨JSON/XMLé…ç½®
      - æ•Œäººå±æ€§
      - æ­¦å™¨å±æ€§
      - æ³¢æ¬¡è§„åˆ™
```

#### 5. **éŸ³æ•ˆç³»ç»Ÿ**
```
å½“å‰: æ— éŸ³æ•ˆ
æ”¹è¿›: æ·»åŠ Java Sound API
      - èƒŒæ™¯éŸ³ä¹
      - æ”»å‡»éŸ³æ•ˆ
      - å—å‡»éŸ³æ•ˆ
```

---

## ğŸ“š æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Java 8+
- **GUIæ¡†æ¶**: AWT (Abstract Window Toolkit)
- **å›¾å½¢åº“**: Java 2D Graphics
- **å¹¶å‘**: Java Thread, CopyOnWriteArrayList
- **ç®—æ³•**: A* å¯»è·¯ç®—æ³•
- **è®¾è®¡æ¨¡å¼**: æ¨¡æ¿æ–¹æ³•ã€ç­–ç•¥ã€è§‚å¯Ÿè€…ã€å·¥å‚ã€å•ä¾‹ã€åŸå‹

---

## ğŸ“– å­¦ä¹ è·¯å¾„å»ºè®®

### åˆå­¦è€…
1. ä» `Main.java` å¼€å§‹ï¼Œç†è§£ç¨‹åºå…¥å£
2. å­¦ä¹  `Start.java`ï¼Œäº†è§£Swingç•Œé¢
3. ç ”ç©¶ `GameClient.java`ï¼Œç†è§£æ¸¸æˆå¾ªç¯
4. é˜…è¯» `GameObject.java`ï¼ŒæŒæ¡ç»§æ‰¿ä½“ç³»

### è¿›é˜¶
1. æ·±å…¥ `World.java`ï¼Œç†è§£æ¸¸æˆç®¡ç†
2. ç ”ç©¶ `Role.java` å’Œ `Hero.java`ï¼Œå­¦ä¹ è§’è‰²ç³»ç»Ÿ
3. åˆ†æ `Weapon.java`ï¼Œç†è§£æ­¦å™¨æœºåˆ¶
4. å­¦ä¹  `Enemy.java`ï¼ŒæŒæ¡AIåŸºç¡€

### é«˜çº§
1. ç ”ç©¶ `Pathfinder.java`ï¼Œå®ç°A*ç®—æ³•
2. ä¼˜åŒ–ç¢°æ’æ£€æµ‹ï¼Œå¼•å…¥ç©ºé—´åˆ†åŒº
3. é‡æ„ä»£ç ï¼Œåº”ç”¨æ›´å¤šè®¾è®¡æ¨¡å¼
4. æ·»åŠ æ–°åŠŸèƒ½ï¼Œå¦‚æŠ€èƒ½ç³»ç»Ÿã€è£…å¤‡ç³»ç»Ÿ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2026-02-22  
**ä½œè€…**: ZombieCrisiså¼€å‘å›¢é˜Ÿ
